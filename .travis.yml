language: java
jdk:
- oraclejdk8
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
addons:
  apt:
    packages:
    - expect
    - rpm
    - gnupg
after_success:
- mkdir $HOME/.gnupg
- openssl aes-256-cbc -K $encrypted_168997f84686_key -iv $encrypted_168997f84686_iv
  -in gpg.tar.enc -out gpg.tar -d
- tar xv -C $HOME/.gnupg -f gpg.tar
- GPG_PATH=$HOME/.gnupg ./travis-sign-rpm.sh
deploy:
  provider: releases
  api_key:
    secure: E5dKfiXBUTFpIJFWSk2+jBcS6FdO++DHqqGp8XDtrrCpKJfynYqPR+/23oYKYVz+H21CnEiUTqtVKvlftccWbErcRAD3R0G1bw6efj3TNiBb0Z0dRa8qgP+3NVTWhRZ4hwSn/0mClY96kz3cEjiJlBs6lYgneKlmg2As++LDjGIWZEfPUBXK6gtG69ZtMj2NBibKg1KQWZV6nZApBvYtkGJJqhu82jlDMbi5ltaOayVl4ISy0NlfcyW9ZNeLsCgjq9NVl5UV7ti6wB25fosz3fc7OZVF0SlU7Txg5Gi0bsnvRAijZRpZQwuo0Dza3Tqv6YDTXmfZT8qaqF6+SGNBH1BLSVApk2pBddJATzM5o0SZkuywUK4tMq6qCJjdPgMXnR4b/t3jK5f5w/ahWgYsqU7z7dBpxDDWafDFibkylJEQaUexktYdxq7JQZ5F6CNcT+qkPhj6LELR9eYh22xnuorwh6sfBfQqWJ0zveD9IcAv4Fl0ogXniftaLxRJ+G9vSQtzruWCTQRT3Ys2eIjc67wI47uMFcU5naM/YDt9BAQZzBoP9vKGiiyRwoa5kqpEy++qtod8oQTN1mw0B3BubrtlDAKirp8S+Zoix7EAvBt0abIO+zOvblUAjzb4zf2DxXkakvWZ4hxq8LnOItxItyBBRbDxiNYigYd8lRW0los=
  file:
  - build/distributions/rd-*.zip
  - build/distributions/rd-*.tar
  - build/distributions/rundeck-cli*.rpm
  - build/distributions/rundeck-cli*.deb
  - build/libs/rundeck-cli-*-all.jar
  on:
    repo: rundeck/rundeck-cli
    tags: true
  file_glob: true
after_deploy:
- ./gradlew -PbintrayUser=gschueler -PbintrayRepo=rundeck-maint-staging-rpm bintrayUpload
env:
  global:
  - secure: 2LDWRCZsuUYNUNHQz4oiaq9VIcdp0ziI7SKBxUxfqT4rehJ0J7kz+UPqwtgxMiUyQaHJQqzkcR+m6H3VZj9BREY+POiyu+yJOqhe3KRpDAfiN/gnwN81Nh9wloVaxyVe6i5yPaaBvE5vIREi7SAUdDtdsQ6WSkQ3JnaSL5Nz6e3DKR6+wgaTmBhh/TTW1YuN1qo5EjBpm0//M+KwY5BvVYOfPYLHCpVqnWFePQBkZY13lvufC5XPipXMf6c5Un/Uy6oVaRgLSPHDyELQvBzMSRPtzNmJSDm75LvclHHgDYEUcrcxRoWgAEISaBeIpGhe/PnsswCtQMfQBIm0W8Cv+HThbdCrrTdz/hWsohVvLFkCl9L8NOTOnATr2I9F0GBmsdhJvvr10JqGGol8Y9wwu5eiO9AWmchjZPicIWj5Dwo9E8AdT20aX4l287StESedS/Wtqh7gdf4d3Y1svWLEmh3gbERqOI9hRDV0DotfumhaW49SbaN/XecODiyPrnLBONSrYk1bWADDAvBZm/Jy0hvFbaVFFI8HfZMVJCO4GJJwna2MEMnsouNl2eDBFtvX5JHQ00JP4QacPFwW3/0NsgdaUGLiPSNezNJ1kBYtVbhQg4oL3yTkFaU6KuGhJcdSCVJUwOeP0YZF0oklofLhEhc4puzAi6EmGvLpMeh/huw=
  - secure: CiDLNIuGaaI0Km+fxWl2f2voPyVhtedPrU2agqc2wrzrLjA7MHE4Go4FwPyyMEM3Fh6HhMsi729QH3gcf3HIUTpszHLUZ2SANSTE3PJZA/2Nh7gCoby3e4A6PFL1rWUfa0UtJ2dicl87sEeMEzlUKHjAlIAHt9CbQKrandBLOX//EYjlTabbNQvYc/4JfmwSgaNSrT1y0/bEU2UaxYqX4ti0SjPK1BCKbihotz5vxTCEWDS6ltgcQXU64rq1/9tU2k1hIjM0oDLr34z22sCWr2od4K0csJc1S59F217pz6DbtgNBarBOIhyQWh5JCacT/4UeYUZgp7wRW6bWaxcPLYa9gCt6/QK8tKkq1jSfUJbNRbnzcoSrkYQZ26qyMLbXuQPfAKe9NFoMRRiltgptXH7Htq+fF7HsOo4Aa5Bmn/Ic4awW1aMZiAi5tmhW2zDGFq8rA7Dpiy57XVf76ngHZnMbv9iXtXtYl6DbuOghmS3RX+Zuy/Rbw9Muus1WmQpBu8cGHHhLzRkZrmdaMx9Qoz2BoNZswTebl9uJjpY8xOhBO26aU0P46mO1YhrmUNG0as8n86A+rXC3XesL68w0GsKLSd/9VuGzJg0jDoFuf0GZ44bG2lc4ShtXqioniSvoRo5vmBLZhFc1LziHQJcVbzePHzDmZUXrBhj5TYsqEHQ=
  - secure: RIMWgAJB0bOEjqyAoMdgRlIYLxvZYBhXvQ+cRwdxJLoU+OKLSOiyiHlgXzt8Krl0Ln44z5SYM4bkR23V9qVMnSi2cD5NlEPzeLz+uezae9cO99g+Pz4HytZVf1hHGtW17iWbg5Gl8R0K7PLlThtHQ0RgXXUiFDmMmjEC+VH3ZgWu71lXD/9jByNQNSZyFXfV4hSqblpVOlpXcZgwB0teCdacz6kfTImyE2XZkN7J7lEE8z7RK2aq0T8dCiqfXT9J13agw1HFeMzDaMI1bgKkXHMdTk5oMarAaAR2OwzmkXackyxQM0EG1LV1BkVz6LG4fs8X8HCG3pOwwIHNuJvLHInAf4D10pDgCE3Lj01mnqIHK7q0ERC8NVZDX/ysgssRfHMh6kLcfwPuOz0noTEpvKBIoADjIPf890/7IPUpmhcvWjumY3YAL/8PqpMmcs2sGQKmaKk7csshsy+QpzoktPG6xhqzlUUKopmoafAjhCt0Qy0D0KAllPnqrUlsUYAmkgzyvTdriCovk3j5CtJVBD1F5j8mB1R4ftcinMeEYt9B4pnaejqnVRcs/s8GnnMn6xDY8rdO7N+E7XSdQGqTyu0w1nBfTPbzWtbjmn2r32XMNwtsC+1Ce2dbdCZMuZoVIkNwo5xICCbR2fSob2i59+JrbveMHiXcqr3LF+4JukQ=
